// src/compiler/index.ts
import { SIGNATURES } from './signatures/index';

export const useCompiler = () => {
  const compile = (rawData: any) => {
    // 1. –í—Å–µ–≥–¥–∞ –≤—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∏–ª–µ—Ç–∞–µ—Ç –∏–∑ Blockly
    console.log("üöÄ –®–õ–Æ–ó –ü–û–ô–ú–ê–õ –ü–û–¢–û–ö:", rawData);
    console.log("üöÄ –æ–±—ä–µ–∫—Ç:", SIGNATURES);
    // 2. –í–†–ï–ú–ï–ù–ù–´–ô –ü–†–ï–î–û–•–†–ê–ù–ò–¢–ï–õ–¨:
    // –ï—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ—Ö–æ–∂–∞ –Ω–∞ –Ω–∞—à –≥–æ—Ç–æ–≤—ã–π —Å–∞–π—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Ç rowId),
    // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, —á—Ç–æ–±—ã SitePreview –Ω–µ —Å–ª–æ–º–∞–ª—Å—è.
    if (Array.isArray(rawData) && rawData.length > 0 && !rawData[0].rowId) {
       console.warn("‚ö†Ô∏è –≠—Ç–æ —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Blockly. –ü–æ–∫–∞ –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏–º –∏—Ö.");
       return []; 
    }

    // –ü–æ–∫–∞ —à–ª—é–∑ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –≤–∞–ª–∏–¥–Ω—ã
    return rawData; 
  };

  return { compile };
};